<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8">
    <title>Smart Triage - Hospital Moinhos do Vento</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">
    <link href="./style.css" rel="stylesheet">
  </head>


  <body>

    <main>

    
      <form id="formStep2" action="./step-three.html">

        <div class="row">
          <div class="col-sm-4"></div>
          <div class="col-sm-4 text-center">
            <h2 class="primary-text primary-title animate__animated animate__fadeInUp">Smart Triage</h2>
          </div>        
        </div>

        <div class="divider-md"></div>

        <div class="row">
          <div class="col-sm-4"></div>
          <div class="col-sm-4 text-center">
            <div class="progress animate__animated animate__fadeInUp">
              <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 66%" aria-valuenow="66" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>

        <div class="divider-lg"></div>

        <div class="row">
          <div class="col-sm-4"></div>
          <div class="col-sm-4 text-center">
            <div class="mb-3 animate__animated animate__zoomIn">
              <label for="" class="form-text primary-text primary-title">Como você se sente agora?</label><br/><br/>
              
              <div class="form-group">
                <select class="selectpicker form-control" multiple data-selected-text-format="count > 4">
                  <option>Diarréia</option>
                  <option>Dor abdominal</option>
                  <option>Dores articulares</option>
                  <option>Dor no corpo</option>
                  <option>Dor de garganta</option>
                  <option>Dor lombar</option>
                  <option>Dor de cabeça</option>
                  <option>Dor no peito</option>
                  <option>Dor para urinar</option>
                  <option>Falta de ar</option>
                  <option>Febre</option>
                  <option>Lesōes na pele</option>
                  <option>Mal estar/tonturas/desmaio</option>
                  <option>Náuseas</option>
                  <option>Palpitação</option>
                  <option>Tonteira</option>
                  <option>Torçōes</option>
                  <option>Tosse</option>
                  <option>Vômitos</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="row">
          <div class="col-sm-4"></div>
          <div class="col-sm-4 text-center">
            <div class="mb-3 animate__animated animate__zoomIn">
              <br/><br/>
              <label for="inputMedicamentos" class="form-text primary-text primary-title">Faz uso de medicamentos? Se sim, quais?</label>

              <br/><br/>
              <input type="text" class="form-control form-control-lg" id="inputMedicamentos" aria-describedby="" placeholder="">
            </div>
          </div>
        </div> -->



        <div class="divider-md"></div>

        <div class="row">
          <div class="col-xs-5 col-md-4 col-lg-4 col-xl-5"></div>
          <div class="col-xs-2 col-md-4 col-lg-4 col-xl-2 text-center animate__animated animate__fadeInUp">
            <button type="submit" class="btn btn-primary btn-lg" id="btn-cta">Concluir Triagem</button>
          </div>
        </div>

        <div class="divider-sm"></div>

        <div class="row">
          <div class="col-sm-3"></div>
          <div class="col-sm-6 text-center">
            <p class="primary-text primary-p">Desenvolvido por Grupo 14 - Challenge FIAP<br/>© 2022</p>
          </div>
        </div>

      </form>

    </main>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>

    <script>

      // To style all selects
      $('.selectpicker').selectpicker();




      $("#formStep2").on("submit", function(){

        var BASE_URI = "http://ec2-52-4-254-101.compute-1.amazonaws.com:8080/v1/hmv/questions/"+$("#inputEmail1").val();
        var $form = $(this);

        $.ajax({
            type: 'POST',
            crossDomain: true,
            data: "cpf="+ $("#inputEmail1").val(),
            // dataType: 'json',
            url: BASE_URI,
            success: function (data, textStatus, xhr) {
              
              // Cliente já havia preenchido a app anteriormente, os próximos passados trazem as questōes já preenchidas
              if (xhr.status == 200) {
                Cookies.get('cpf');
                Cookies.get('answers');

                window.location.href = $form.attr("action");
              }
            },
            error: function (error) {
  
              console.log("Erro "+error.status);
            }
        })

        return false;
        });

    </script>
  </body>
</html>